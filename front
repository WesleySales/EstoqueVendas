#include <stdio.h>
#include <string.h>
#include <curses.h>

#define USERNAME "client"
#define PASSWORD "senha123"
#define ADMIN_USERNAME "admin"
#define ADMIN_PASSWORD "admin123"

void sucessoCadastro(WINDOW *win) {
    wprintw(win, "Cadastro realizado com sucesso! \n");
    wrefresh(win);
}

void adicionarProduto(WINDOW *win) {
    char produto[256];

    wprintw(win, "Digite o nome do produto para adicionar: \n");
    wrefresh(win);
    wgetstr(win, produto);
    // Aqui você pode adicionar o código para salvar o novo produto

    wprintw(win, "Produto '%s' adicionado com sucesso!\n", produto);
    wrefresh(win);
}

void cadastro(WINDOW *win) {
    char username[256];
    char senha[256];

    wprintw(win, "Crie um nome de usuário: \n");
    wrefresh(win);
    wgetstr(win, username);
    wprintw(win, "Crie uma senha: \n");
    wrefresh(win);
    wgetstr(win, senha);

    // Aqui você pode adicionar o código para salvar os novos dados de usuário
    sucessoCadastro(win);
}

void loginCliente(WINDOW *win) {
    char username[256];
    char senha[256];

    wprintw(win, "Digite o nome de usuário: \n");
    wrefresh(win);
    wgetstr(win, username);
    wprintw(win, "Digite a senha: \n");
    wrefresh(win);
    wgetstr(win, senha);

    if (strcmp(username, USERNAME) == 0 && strcmp(senha, PASSWORD) == 0) {
        wprintw(win, "Login de cliente realizado com sucesso!\n");
    } else {
        wprintw(win, "Nome de usuário ou senha incorretos!\n");
    }
    wrefresh(win);
}

void loginAdmin(WINDOW *win) {
    char username[256];
    char senha[256];

    wprintw(win, "Digite o nome de usuário do administrador: \n");
    wrefresh(win);
    wgetstr(win, username);
    wprintw(win, "Digite a senha do administrador: \n");
    wrefresh(win);
    wgetstr(win, senha);

    if (strcmp(username, ADMIN_USERNAME) == 0 && strcmp(senha, ADMIN_PASSWORD) == 0) {
        wprintw(win, "Login de administrador realizado com sucesso!\n");
        wrefresh(win);
        adicionarProduto(win);
    } else {
        wprintw(win, "Nome de usuário ou senha de administrador incorretos!\n");
        wrefresh(win);
    }
}

int main() {
    WINDOW *win;
    int tipoUsuario;

    initscr(); // Inicializa a tela para uso com a biblioteca curses
    cbreak(); // Desativa o buffer de linha, permitindo que os caracteres sejam lidos imediatamente
    noecho(); // Desativa a exibição automática de caracteres de entrada
    win = newwin(0, 0, 0, 0); // Cria uma nova janela

    wprintw(win, "Digite 1 para Administrador ou 2 para Cliente: \n");
    wrefresh(win);
    wscanw(win, "%d", &tipoUsuario);

    if (tipoUsuario == 1) {
        loginAdmin(win);
    } else if (tipoUsuario == 2) {
        cadastro(win);
    } else {
        wprintw(win, "Tipo de usuário inválido!\n");
        wrefresh(win);
    }

    delwin(win); // Deleta a janela criada
    endwin(); // Finaliza a tela curses
    return 0;
}
